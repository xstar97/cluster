apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: grocy
  namespace: flux-system
spec:
  interval: 10m
  path: clusters/main/kubernetes/apps/assets/grocy/app
  prune: true
  sourceRef:
    kind: GitRepository
    name: cluster
  targetNamespace: grocy
  postBuild:
    # substitute:
    #   CHART: grocy
    #   NAME: grocy
    #   GROUP: assets
    #   PROT: http
    #   SVC: grocy
    #   NAMESPACE: grocy
    #   PORT: "10013"
    substituteList:
      - chart: grocy
      - ENDPOINTS.0.name: grocy
      - ENDPOINTS.0.url: http://grocy.grocy.svc.cluster.local:10013
      - ENDPOINTS.0.gatus_group: assets
